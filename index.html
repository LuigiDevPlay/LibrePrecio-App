<!doctype html>
<html lang="es" id="mainHtml">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LibrePrecio | Calculadora Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: "class" };
    </script>
    <style>
      @media print {
        .no-print {
          display: none !important;
        }
        body {
          background: white !important;
          color: black !important;
          padding: 0;
        }
        .informe-layout {
          border: 2px solid #3b82f6 !important;
          padding: 40px !important;
          border-radius: 20px !important;
        }
        .card-pdf {
          border: 1px solid #e5e7eb !important;
          background: #f9fafb !important;
          color: black !important;
        }
      }
      .animate-fade {
        animation: fadeIn 0.3s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body
    class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen transition-colors duration-300 font-sans"
  >
    <div class="max-w-4xl mx-auto py-10 px-4">
      <header class="flex justify-between items-center mb-8 no-print">
        <div>
          <h1 class="text-4xl font-black text-blue-600 dark:text-blue-400 tracking-tighter">
            LibrePrecio
          </h1>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">
            Calculadora de Presupuestos
          </p>
        </div>
        <button
          onclick="toggleDarkMode()"
          class="p-3 bg-white dark:bg-gray-800 shadow-md rounded-full"
        >
          <span id="themeIcon">üåô</span>
        </button>
      </header>

      <div class="flex bg-gray-200 dark:bg-gray-800 p-1 rounded-2xl mb-8 no-print shadow-inner">
        <button
          onclick="cambiarModo('producto')"
          id="btnModoProducto"
          class="flex-1 py-3 rounded-xl font-bold transition-all bg-white dark:bg-blue-600 shadow text-blue-600 dark:text-white text-sm md:text-base"
        >
          üì¶ Producto
        </button>
        <button
          onclick="cambiarModo('servicio')"
          id="btnModoServicio"
          class="flex-1 py-3 rounded-xl font-bold transition-all text-gray-500 dark:text-gray-400 text-sm md:text-base"
        >
          üõ†Ô∏è Servicio
        </button>
      </div>

      <section
        class="no-print bg-blue-50 dark:bg-gray-800 p-6 rounded-3xl mb-6 border-2 border-dashed border-blue-200"
      >
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input
            type="text"
            id="inputNegocio"
            placeholder="Nombre de tu Negocio"
            class="p-3 rounded-xl border dark:bg-gray-700 outline-none"
          />
          <input
            type="text"
            id="inputLogo"
            maxlength="2"
            placeholder="Iniciales Logo (Ej: LP)"
            class="p-3 rounded-xl border dark:bg-gray-700 outline-none"
          />
        </div>
      </section>

      <section
        id="seccionProducto"
        class="no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700 animate-fade"
      >
        <h2 class="text-xl font-bold mb-6 text-blue-500 italic">üì¶ Materia Prima e Insumos</h2>
        <div id="listaInsumos" class="space-y-3 mb-6">
          <div
            class="grid grid-cols-12 gap-2 items-center bg-gray-50 dark:bg-gray-900/50 p-2 rounded-xl border dark:border-gray-700"
          >
            <input
              type="text"
              placeholder="Insumo"
              class="col-span-4 p-2 bg-transparent outline-none text-xs md:text-sm"
            />
            <input
              type="number"
              placeholder="Cant"
              oninput="actualizarSubtotal(this)"
              class="col-span-2 p-2 bg-white dark:bg-gray-700 border rounded-lg text-center item-cant text-xs md:text-sm"
            />
            <input
              type="number"
              placeholder="Precio"
              oninput="actualizarSubtotal(this)"
              class="col-span-3 p-2 bg-white dark:bg-gray-700 border rounded-lg text-center item-precio text-xs md:text-sm"
            />
            <input
              type="text"
              value="0.00"
              class="col-span-2 p-2 text-right font-bold item-subtotal text-blue-500 text-xs md:text-sm bg-white dark:bg-gray-700 border rounded-lg"
              readonly
            />
            <button onclick="this.parentElement.remove()" class="col-span-1 text-red-400 text-xl">
              √ó
            </button>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <button
            onclick="agregarFila()"
            class="bg-blue-50 dark:bg-blue-900/30 text-blue-600 px-6 py-2.5 rounded-xl font-bold"
          >
            + Insumo
          </button>
          <div class="flex items-center gap-3 bg-blue-600 p-3 rounded-2xl">
            <label class="text-[10px] font-black uppercase text-blue-100">Producci√≥n:</label>
            <input
              type="number"
              id="unidadesProduccion"
              value="1"
              min="1"
              class="w-12 bg-white rounded-lg text-center font-black text-blue-600 p-1"
            />
          </div>
        </div>
      </section>

      <section
        id="seccionServicio"
        class="hidden no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700 animate-fade"
      >
        <h2 class="text-xl font-bold mb-6 text-purple-500 italic">üõ†Ô∏è Presupuesto de Servicio</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <input
            type="number"
            id="precioHora"
            placeholder="Costo por hora ($)"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          />
          <input
            type="number"
            id="horasProyecto"
            placeholder="Horas por proyecto"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          />
          <input
            type="number"
            id="proyectosMes"
            placeholder="Proyectos al mes"
            class="p-3 border border-purple-300 rounded-xl dark:bg-gray-700 font-bold text-purple-600"
          />
          <select
            id="modalidadServicio"
            onchange="toggleTransporte()"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          >
            <option value="digital">üíª Digital</option>
            <option value="presencial">üöó Presencial</option>
          </select>
          <div id="divTransporte" class="hidden md:col-span-2">
            <input
              type="number"
              id="gastoTransporte"
              placeholder="Gastos Traslado ($)"
              class="w-full p-3 border border-orange-300 rounded-xl dark:bg-gray-700 font-bold text-orange-600"
            />
          </div>
        </div>
      </section>

      <section
        class="no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700"
      >
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div>
            <label class="text-[10px] uppercase font-black text-gray-400">Luz ($)</label
            ><input
              type="number"
              id="luz"
              value="0"
              class="w-full p-3 border rounded-xl dark:bg-gray-700"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-gray-400">Agua ($)</label
            ><input
              type="number"
              id="agua"
              value="0"
              class="w-full p-3 border rounded-xl dark:bg-gray-700"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-green-500">% Margen</label
            ><input
              type="number"
              id="ganancia"
              value="30"
              class="w-full p-3 border rounded-xl dark:bg-gray-700 text-green-500 font-bold"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-red-500">% Inflaci√≥n</label
            ><input
              type="number"
              id="inflacion"
              value="5"
              class="w-full p-3 border rounded-xl dark:bg-gray-700 text-red-500 font-bold"
            />
          </div>
        </div>

        <div class="flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl mb-6">
          <input type="checkbox" id="checkTerminos" class="w-5 h-5 accent-blue-600" />
          <label for="checkTerminos" class="text-xs text-gray-500 italic"
            >Acepto los t√©rminos y el procesamiento de datos del informe.</label
          >
        </div>

        <button
          onclick="iniciarProceso()"
          id="btnCalcular"
          class="w-full bg-blue-600 text-white font-black py-5 rounded-2xl shadow-lg uppercase tracking-widest hover:bg-blue-700 transition"
        >
          Calcular Informe
        </button>
      </section>

      <div id="resultado" class="hidden animate-fade space-y-6">
        <div class="informe-layout p-4 bg-white dark:bg-transparent">
          <div
            class="hidden sm:flex items-center justify-between border-b-4 border-blue-600 pb-6 mb-8 print:flex"
          >
            <div class="flex items-center gap-4">
              <div
                id="pdfLogo"
                class="w-16 h-16 text-gray-800 dark:text-white flex items-center justify-center rounded-xl text-2xl font-black italic"
              >
                LP
              </div>
              <div>
                <h1
                  id="pdfNombreNegocio"
                  class="text-3xl font-black uppercase text-gray-800 dark:text-white"
                >
                  MI NEGOCIO
                </h1>
                <p
                  id="subtituloInforme"
                  class="text-[10px] text-blue-600 font-black tracking-[0.2em] uppercase"
                >
                  Informe de Rentabilidad
                </p>
              </div>
            </div>
            <div id="pdfFecha" class="text-xs text-gray-400 font-bold"></div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="p-8 bg-green-500 text-white rounded-3xl text-center card-pdf">
              <p id="labelPrincipal" class="text-xs uppercase font-bold opacity-80 mb-1">
                Precio Sugerido Detal
              </p>
              <p id="resPrincipal" class="text-4xl font-black">$0.00</p>
            </div>
            <div class="p-8 bg-blue-600 text-white rounded-3xl text-center card-pdf">
              <p id="labelSecundario" class="text-xs uppercase font-bold opacity-80 mb-1">
                Precio Sugerido Mayor
              </p>
              <p id="resSecundario" class="text-4xl font-black">$0.00</p>
            </div>
          </div>

          <div
            class="bg-white dark:bg-gray-800 text-black dark:text-white p-8 rounded-3xl shadow-xl card-pdf"
          >
            <h3
              class="text-yellow-400 font-black uppercase text-sm mb-6 tracking-widest text-center border-b border-gray-700 pb-4"
            >
              An√°lisis Proyectado de Ingresos
            </h3>
            <div
              class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center border-b border-gray-700 pb-8 mb-6"
            >
              <div>
                <p id="labelCol1" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol1" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol2" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol2" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol3" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol3" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol4" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol4" class="text-lg font-bold text-yellow-500"></p>
              </div>
            </div>
            <div id="alertaInflacion" class="text-sm italic text-gray-400 text-center"></div>
          </div>
        </div>
        <button
          onclick="window.print()"
          class="w-full py-4 bg-gray-800 text-white rounded-2xl font-black no-print"
        >
          üñ®Ô∏è GENERAR PDF PROFESIONAL
        </button>
      </div>

      <footer
        class="mt-20 no-print border-t border-gray-200 dark:border-gray-800 pt-10 pb-10 text-center"
      >
        <p class="text-xs text-gray-400 mb-4">
          ¬© 2024 LibrePrecio. Herramienta gratuita para emprendedores.
        </p>
        <div
          class="flex justify-center gap-6 text-[10px] font-bold text-blue-500 uppercase tracking-widest"
        >
          <a href="#" class="hover:underline">Privacidad</a>
          <a href="#" class="hover:underline">T√©rminos de Uso</a>
          <a href="#" class="hover:underline">Contacto</a>
        </div>
      </footer>

      <div
        id="modalCarga"
        class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4"
      >
        <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl max-w-sm w-full text-center">
          <div class="text-4xl mb-4">üõ°Ô∏è</div>
          <h3 class="text-xl font-black mb-2 dark:text-white">Verificando Datos...</h3>
          <!-- <p class="text-gray-500 text-xs mb-6 uppercase tracking-widest">Cargando Publicidad</p>
          <div
            class="bg-yellow-50 dark:bg-yellow-900/20 h-32 rounded-2xl mb-6 flex items-center justify-center border-2 border-dashed border-yellow-200 dark:border-yellow-800"
          >
            <span class="text-[8px] font-black text-yellow-600">ADSENSE AD SPACE</span>
          </div> -->
          <div class="w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full overflow-hidden">
            <div
              id="barraCarga"
              class="bg-blue-600 h-full transition-all duration-300"
              style="width: 0%"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script src="src/js/main.js"></script>
  </body>
</html>
