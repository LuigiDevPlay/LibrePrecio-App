<!doctype html>
<html lang="es" id="mainHtml">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-3519027820107797"
      crossorigin="anonymous"
    ></script>
    <title>LibrePrecio | Calculadora App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { darkMode: "class" };
    </script>
    <style>
      @media print {
        .no-print {
          display: none !important;
        }
        body {
          background: white !important;
          color: black !important;
          padding: 0;
        }
        .informe-layout {
          border: 2px solid #3b82f6 !important;
          padding: 40px !important;
          border-radius: 20px !important;
        }
        .card-pdf {
          border: 1px solid #e5e7eb !important;
          background: #f9fafb !important;
          color: black !important;
        }
      }
      .animate-fade {
        animation: fadeIn 0.3s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body
    class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen transition-colors duration-300 font-sans"
  >
    <div class="max-w-4xl mx-auto py-10 px-4">
      <header class="flex justify-between items-center mb-8 no-print">
        <div>
          <h1 class="text-4xl font-black text-blue-600 dark:text-blue-400 tracking-tighter">
            LibrePrecio
          </h1>
          <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">
            Calculadora de Presupuestos
          </p>
        </div>
        <button
          onclick="toggleDarkMode()"
          class="p-3 bg-white dark:bg-gray-800 shadow-md rounded-full"
        >
          <span id="themeIcon">üåô</span>
        </button>
      </header>

      <div class="flex bg-gray-200 dark:bg-gray-800 p-1 rounded-2xl mb-8 no-print shadow-inner">
        <button
          onclick="cambiarModo('producto')"
          id="btnModoProducto"
          class="flex-1 py-3 rounded-xl font-bold transition-all bg-white dark:bg-blue-600 shadow text-blue-600 dark:text-white text-sm md:text-base"
        >
          üì¶ Producto
        </button>
        <button
          onclick="cambiarModo('servicio')"
          id="btnModoServicio"
          class="flex-1 py-3 rounded-xl font-bold transition-all text-gray-500 dark:text-gray-400 text-sm md:text-base"
        >
          üõ†Ô∏è Servicio
        </button>
      </div>

      <section
        class="no-print bg-blue-50 dark:bg-gray-800 p-6 rounded-3xl mb-6 border-2 border-dashed border-blue-200"
      >
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input
            type="text"
            id="inputNegocio"
            placeholder="Nombre de tu Negocio"
            class="p-3 rounded-xl border dark:bg-gray-700 outline-none"
          />
          <input
            type="text"
            id="inputLogo"
            maxlength="2"
            placeholder="Iniciales Logo (Ej: LP)"
            class="p-3 rounded-xl border dark:bg-gray-700 outline-none"
          />
        </div>
      </section>

      <section
        id="seccionProducto"
        class="no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700 animate-fade"
      >
        <h2 class="text-xl font-bold mb-6 text-blue-500 italic">üì¶ Materia Prima e Insumos</h2>
        <div id="listaInsumos" class="space-y-3 mb-6">
          <div
            class="grid grid-cols-12 gap-2 items-center bg-gray-50 dark:bg-gray-900/50 p-3 rounded-xl border dark:border-gray-700 shadow-sm"
          >
            <div class="col-span-10 md:col-span-4">
              <label class="block text-[8px] md:text-[10px] uppercase text-gray-400 font-bold mb-1"
                >Insumo / Concepto</label
              >
              <input
                type="text"
                placeholder="Insumo (ej. Harina)"
                class="w-full p-2 bg-transparent outline-none text-xs md:text-sm font-medium dark:text-white"
              />
            </div>

            <button
              onclick="this.parentElement.remove()"
              class="col-span-2 md:col-span-1 text-red-400 text-2xl hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors md:order-last self-end pb-1"
            >
              √ó
            </button>

            <div class="col-span-4 md:col-span-2">
              <label
                class="block text-[8px] md:text-[10px] uppercase text-gray-400 font-bold mb-1 text-center md:text-left"
              >
                <span class="md:hidden">Cant.</span>
                <span class="hidden md:inline">Cantidad</span>
              </label>
              <input
                type="number"
                placeholder="0"
                oninput="actualizarSubtotal(this)"
                class="w-full p-2 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg text-center item-cant text-xs md:text-sm dark:text-white"
              />
            </div>

            <div class="col-span-4 md:col-span-2">
              <label
                class="block text-[8px] md:text-[10px] uppercase text-gray-400 font-bold mb-1 text-center md:text-left"
              >
                <span class="md:hidden">Precio</span>
                <span class="hidden md:inline">Precio Product.</span>
              </label>
              <input
                type="number"
                placeholder="0.00"
                oninput="actualizarSubtotal(this)"
                class="w-full p-2 bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg text-center item-precio text-xs md:text-sm dark:text-white"
              />
            </div>

            <div class="col-span-4 md:col-span-3">
              <label
                class="block text-[8px] md:text-[10px] uppercase text-gray-400 font-bold mb-1 text-right"
              >
                <span class="md:hidden">Total</span>
                <span class="hidden md:inline">Total</span>
              </label>
              <input
                type="text"
                value="0.00"
                class="w-full p-2 text-right font-black item-subtotal text-blue-600 dark:text-blue-400 text-xs md:text-sm bg-blue-50/50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg"
                readonly
              />
            </div>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <button
            onclick="agregarFila()"
            class="bg-blue-50 dark:bg-blue-900/30 text-blue-600 px-6 py-2.5 rounded-xl font-bold"
          >
            + Insumo
          </button>
          <div class="flex items-center gap-3 bg-blue-600 p-3 rounded-2xl">
            <label class="text-[10px] font-black uppercase text-blue-100">Producci√≥n:</label>
            <input
              type="number"
              id="unidadesProduccion"
              value="1"
              min="1"
              class="w-12 bg-white rounded-lg text-center font-black text-blue-600 p-1"
            />
          </div>
        </div>
      </section>

      <section
        id="seccionServicio"
        class="hidden no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700 animate-fade"
      >
        <h2 class="text-xl font-bold mb-6 text-purple-500 italic">üõ†Ô∏è Presupuesto de Servicio</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <input
            type="number"
            id="precioHora"
            placeholder="Costo por hora ($)"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          />
          <input
            type="number"
            id="horasProyecto"
            placeholder="Horas por proyecto"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          />
          <input
            type="number"
            id="proyectosMes"
            placeholder="Proyectos al mes"
            class="p-3 border border-purple-300 rounded-xl dark:bg-gray-700 font-bold text-purple-600"
          />
          <select
            id="modalidadServicio"
            onchange="toggleTransporte()"
            class="p-3 border rounded-xl dark:bg-gray-700 font-bold"
          >
            <option value="digital">üíª Digital</option>
            <option value="presencial">üöó Presencial</option>
          </select>
          <div id="divTransporte" class="hidden md:col-span-2">
            <input
              type="number"
              id="gastoTransporte"
              placeholder="Gastos Traslado ($)"
              class="w-full p-3 border border-orange-300 rounded-xl dark:bg-gray-700 font-bold text-orange-600"
            />
          </div>
        </div>
      </section>

      <section
        class="no-print bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-6 mb-6 border border-gray-100 dark:border-gray-700"
      >
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div>
            <label class="text-[10px] uppercase font-black text-gray-400">Luz ($)</label
            ><input
              type="number"
              id="luz"
              value="0"
              class="w-full p-3 border rounded-xl dark:bg-gray-700"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-gray-400">Agua ($)</label
            ><input
              type="number"
              id="agua"
              value="0"
              class="w-full p-3 border rounded-xl dark:bg-gray-700"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-green-500">% Margen</label
            ><input
              type="number"
              id="ganancia"
              value="30"
              class="w-full p-3 border rounded-xl dark:bg-gray-700 text-green-500 font-bold"
            />
          </div>
          <div>
            <label class="text-[10px] uppercase font-black text-red-500">% Inflaci√≥n</label
            ><input
              type="number"
              id="inflacion"
              value="5"
              class="w-full p-3 border rounded-xl dark:bg-gray-700 text-red-500 font-bold"
            />
          </div>
        </div>

        <div class="flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl mb-6">
          <input type="checkbox" id="checkTerminos" class="w-5 h-5 accent-blue-600" />
          <label for="checkTerminos" class="text-xs text-gray-500 italic"
            >Acepto los t√©rminos y el procesamiento de datos del informe.</label
          >
        </div>

        <button
          onclick="iniciarProceso()"
          id="btnCalcular"
          class="w-full bg-blue-600 text-white font-black py-5 rounded-2xl shadow-lg uppercase tracking-widest hover:bg-blue-700 transition"
        >
          Calcular Informe
        </button>
        <div
          class="no-print mt-6 p-4 bg-orange-50 dark:bg-orange-900/10 rounded-2xl border border-orange-100 dark:border-orange-800/30 text-center transition-all hover:shadow-sm"
        >
          <p
            class="text-[11px] text-orange-800 dark:text-orange-300 font-black uppercase tracking-widest flex items-center justify-center gap-2"
          >
            ‚òï ¬øTe ayud√≥ la herramienta?
          </p>
          <p class="text-[10px] text-orange-600 dark:text-orange-400/80 mt-1 italic">
            Tu apoyo me ayuda a mantener este proyecto libre de suscripciones.
          </p>
          <div
            class="mt-2 font-black text-xs text-orange-700 dark:text-orange-200 bg-white dark:bg-orange-800/40 py-2 px-4 rounded-lg inline-block border border-orange-200 dark:border-orange-700"
          >
            PayPal: <span class="select-all">lm3771843@gmail.com</span>
          </div>
        </div>
      </section>

      <div id="resultado" class="hidden animate-fade space-y-6">
        <div class="informe-layout p-4 bg-white dark:bg-transparent">
          <div
            class="hidden sm:flex items-center justify-between border-b-4 border-blue-600 pb-6 mb-8 print:flex"
          >
            <div class="flex items-center gap-4">
              <div
                id="pdfLogo"
                class="w-16 h-16 text-gray-800 dark:text-white flex items-center justify-center rounded-xl text-2xl font-black italic"
              >
                LP
              </div>
              <div>
                <h1
                  id="pdfNombreNegocio"
                  class="text-3xl font-black uppercase text-gray-800 dark:text-white"
                >
                  MI NEGOCIO
                </h1>
                <p
                  id="subtituloInforme"
                  class="text-[10px] text-blue-600 font-black tracking-[0.2em] uppercase"
                >
                  Informe de Rentabilidad
                </p>
              </div>
            </div>
            <div id="pdfFecha" class="text-xs text-gray-400 font-bold"></div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="p-8 bg-green-500 text-white rounded-3xl text-center card-pdf">
              <p id="labelPrincipal" class="text-xs uppercase font-bold opacity-80 mb-1">
                Precio Sugerido Detal
              </p>
              <p id="resPrincipal" class="text-4xl font-black">$0.00</p>
            </div>
            <div class="p-8 bg-blue-600 text-white rounded-3xl text-center card-pdf">
              <p id="labelSecundario" class="text-xs uppercase font-bold opacity-80 mb-1">
                Precio Sugerido Mayor
              </p>
              <p id="resSecundario" class="text-4xl font-black">$0.00</p>
            </div>
          </div>

          <div
            class="bg-white dark:bg-gray-800 text-black dark:text-white p-8 rounded-3xl shadow-xl card-pdf"
          >
            <h3
              class="text-yellow-400 font-black uppercase text-sm mb-6 tracking-widest text-center border-b border-gray-700 pb-4"
            >
              An√°lisis Proyectado de Ingresos
            </h3>
            <div
              class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center border-b border-gray-700 pb-8 mb-6"
            >
              <div>
                <p id="labelCol1" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol1" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol2" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol2" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol3" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol3" class="text-lg font-bold"></p>
              </div>
              <div>
                <p id="labelCol4" class="text-gray-400 text-[10px] uppercase font-bold">---</p>
                <p id="resCol4" class="text-lg font-bold text-yellow-500"></p>
              </div>
            </div>
            <div id="alertaInflacion" class="text-sm italic text-gray-400 text-center"></div>
          </div>
        </div>
        <button
          onclick="window.print()"
          class="w-full py-4 bg-gray-800 text-white rounded-2xl font-black no-print"
        >
          üñ®Ô∏è GENERAR PDF PROFESIONAL
        </button>
        <div class="no-print bg-yellow-50 border border-yellow-200 p-4 rounded-xl text-center mt-6">
          <p class="text-xs text-yellow-800 font-medium">
            üåü <strong>Apoya este proyecto:</strong> Si esta calculadora te ayud√≥ a cobrar mejor,
            considera una donaci√≥n para seguir mejor√°ndola.
          </p>
          <div class="mt-2 text-[10px] font-black text-yellow-600 space-y-1">
            <p class="break-all">USDT (Binance Pay/Network): TQ4v1n1WU8iHRnCAMEkTsRea8DK9j949mm</p>
            <p>PayPal: lm3771843@gmail.com</p>
          </div>
        </div>
      </div>

      <footer
        class="mt-20 no-print border-t border-gray-200 dark:border-gray-800 pt-10 pb-10 text-center"
      >
        <p class="text-xs text-gray-400 mb-4">
          ¬© 2024 LibrePrecio. Herramienta gratuita para emprendedores.
        </p>
        <div
          class="flex justify-center gap-6 text-[10px] font-bold text-blue-500 uppercase tracking-widest"
        >
          <a href="privacidad.html" class="hover:underline">Privacidad</a>
          <a href="terminos.html" class="hover:underline">T√©rminos de Uso</a>
          <a href="contacto.html" class="hover:underline">Contacto</a>
        </div>
      </footer>

      <div
        id="modalCarga"
        class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4"
      >
        <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl max-w-sm w-full text-center">
          <div class="text-4xl mb-4">üõ°Ô∏è</div>
          <h3 class="text-xl font-black mb-2 dark:text-white">Verificando Datos...</h3>
          <div class="w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full overflow-hidden">
            <div
              id="barraCarga"
              class="bg-blue-600 h-full transition-all duration-300"
              style="width: 0%"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="modalTerminos"
      class="hidden fixed inset-0 bg-black/60 backdrop-blur-md z-100 flex items-center justify-center p-4 animate-fade"
    >
      <div
        class="bg-white dark:bg-gray-800 w-full max-w-sm rounded-3xl p-8 text-center shadow-2xl border border-red-100 dark:border-red-900/30"
      >
        <div
          class="w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl"
        >
          ‚ö†Ô∏è
        </div>
        <h3 class="text-xl font-black text-gray-900 dark:text-white uppercase tracking-tighter">
          Acceso Denegado
        </h3>
        <p class="text-gray-500 dark:text-gray-400 text-sm mt-3 leading-relaxed">
          Para garantizar la seguridad legal y financiera, es obligatorio aceptar los
          <b>T√©rminos de Uso y Pol√≠ticas</b> antes de generar el informe.
        </p>
        <button
          onclick="document.getElementById('modalTerminos').classList.add('hidden')"
          class="mt-8 w-full bg-gray-900 dark:bg-white dark:text-gray-900 text-white font-bold py-4 rounded-2xl hover:scale-105 transition-transform"
        >
          Entendido, lo har√©
        </button>
      </div>
    </div>

    <script src="src/js/main.js"></script>
  </body>
</html>
